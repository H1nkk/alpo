# Объекты и алгоритмы

В этом файле описываются основные объекты и алгоритмы, связанные с ними.

## Абстрактный класс “Таблица”

### Методы класса

- Поиск полинома,
- Добавление полинома (включает предварительный поиск),
- Удаление полинома (включает предварительный поиск).

### Потомки класса

1. Линейная на массиве:
    - Поиск реализуется полным перебором элементов - O(N),
    - Добавление полинома через последовательные действия на проверку уникальности и вставку в конец - O(N),
    - Удаление полинома путём проверки существования полинома и последующего переноса последнего полинома на место удалённого - O(N).
2. Линейная на списке:
    - Поиск реализуется полным перебором элементов - O(N),
    - Добавление полинома через последовательные действия на проверку уникальности и вставку в конец - O(N),
    - Удаление полинома путём проверки существования полинома с последующим удалением соответствующего звена - O(N).
3. Упорядоченная на массиве:
    - Бинарный пoиск - O(logN),
    - Добавление путём прохождения по массиву для поиска места, удовлетворяющего условиям, вставка полинома и сдвиг остальных - O(N +logN),
    - Удаление с помощью бинарного поиска места для удаления с
последующим сдвигом элементов, находящихся правее - O(N +logN).
4. Красно-черное дерево.
5. Две хэш-таблицы (с открытой адресацией и на цепочках).

## Доступ к таблицам

Доступ к полиномам происходит через специальный объект-агрегатор. Объект позволяет выбрать активную таблицу. После выбора можно искать в выбранной таблице или получить итераторы этой таблицы.
Вставка и удаление полинома производится для всех таблиц, хранимых в агрегаторе независимо от того, какая таблица выбрана активной.
Хранение таблиц в агрегаторе реализовано через vector указателей на абстрактные таблицы.

## Пользовательский интерфейс

### Главное окно приложения

Cодержит dropdown список для выбора таблицы, саму таблицу, поле для ввода полинома, текстовую метку для вывода ошибок.
В таблице по правой кнопке мыши должно открываться контекстное меню, позволяющее вычислить полином в точке, переименовать полином, удалить полином.

## Постфикс

### Токенизатор

Разделяет строки на токены, которые нужны в процессе парсинга. Токены характеризуются типом, и индексами начала и конца в строке.

### Парсер

Преобразует последовательность токенов в последовательность исполняемых команд. Если последовательность токенов не задаёт правильный полином или выражение с полиномами, то возвращает ошибку с указанием места в строке.

### Интерпретатор

Получает на вход таблицу существующих полиномов и последовательность команд. Производит вычисления. Вычисления производятся в числах с плавающей точкой двойной точности.

## Полином

### Описание

Полином хранится в виде линейного списка мономов, отсортированного по убыванию степени.
Моном хранит информацию о коэффициенте и степенях входящих в него переменных.

Как расcчитывается степень монома:

```
СтепеньМонома = (СтепеньW << 48) | (СтепеньX << 32) | (СтепеньY << 16) | СтепеньZ
```

Таким образом, поддерживаются степени переменных в диапазоне от 0 до 65535.

### Алгоритмы

- Сложение/Вычитание. Метод двух указателей. Проходить по полиномам, складывая коэффициенты, если степени мономов совпадают. В целом, идея алгоритма совпадает с идеей слияния отсортированных массивов.
- Умножение на константу. Пройти по всем мономам полинома и умножить коэффициенты на константу.
- Умножение полиномов. Двумя вложенными циклами проходить по каждой паре мономов из первого и второго полиномов. Во внутреннем цикле можно методом двух указателей поддерживать отсортированность результирующего полинома.
- Частная производная/интеграл. Пройти по всем мономам и произвести изменение степеней и коэффициентов. Так как все степени изменяются на одно и то же число, мономы в списке останутся отсортированными.
